# 技術スタック定義書（Technical Stack Specification）
## プロジェクト名：Thinking Process App（仮）
## バージョン：v1.0
## 作成者：yasuhiro
## 目的
本アプリは、ユーザーの思考プロセス（俯瞰 → 要素抽出 → 流れ構築 → 最小仕様化 → 拡張余地）を  
1〜5周の改善ループとして記録・構造化し、  
ノード（カード＋文脈）として可視化する Web アプリケーションである。

マルチデバイス（Android / iOS / PC / Chrome）対応を前提とし、  
将来的にオフライン対応（PWA）も視野に入れる。

---

# 1. 全体アーキテクチャ
本アプリは以下の構成を基本とする。

Frontend（Svelte / React）
    ↓ REST
Backend（Django + Django REST Framework）
   
Database（PostgreSQL）
   
Docker（環境統一）

---

# 2. バックエンド（Backend）

## 2.1 言語
- Python 3.x

## 2.2 フレームワーク
- Django
- Django REST Framework（DRF）

## 2.3 理由
- モデル構造（プロジェクト・周・ステップ・ノード・リンク）を表現しやすい  
- 認証・管理画面が標準で強い  
- REST API を容易に構築できる  
- 拡張性が高い

---

# 3. フロントエンド（Frontend）

## 3.1 候補
- Svelte（推奨）
- React
- Vue

## 3.2 推奨理由（Svelte）
- 軽量で高速  
- コードがシンプルで保守しやすい  
- ノードツリーの UI を構築しやすい  
- 小規模〜中規模アプリに最適

---

# 4. データベース（Database）

## 4.1 DB
- PostgreSQL

## 4.2 理由
- JSON フィールドが強力（文脈データの保存に適する）  
- リレーション構造に強い  
- Django との相性が良い  
- 将来的な全文検索や GraphDB 連携が容易

---

# 5. インフラ / 環境（Infrastructure）

## 5.1 Docker
- 必須（開発環境・本番環境の統一）

## 5.2 コンテナ構成（想定）
- backend（Django）
- frontend（Svelte / React）
- db（PostgreSQL）
- reverse-proxy（Nginx）

---

# 6. オフライン対応（将来対応）

## 6.1 PWA（Progressive Web App）
- Service Worker  
- IndexedDB  
- オンライン時に同期

※ 初期リリースでは非対応  
※ 後から追加可能な構成にする

---

# 7. データモデル（概要）

## 7.1 Project（プロジェクト）
- id  
- title  
- createdAt  
- updatedAt  
- status（active / pending / completed）

## 7.2 Round（周：1〜5）
- id  
- projectId  
- roundNumber  
- note（「なんか思いついた？」の回答）  
- createdAt  

## 7.3 ProcessStep（思考プロセスの5ステップ）
- id  
- projectId  
- roundId  
- stepType（overview / extract / flow / mvp / expand）  
- content  
- createdAt  

## 7.4 Node（ノード：カード＋文脈）
- id  
- projectId  
- roundId  
- stepId  
- title（カード名）  
- context（周辺キーワード・文脈）  
- createdAt  

## 7.5 NodeLink（ノード間リンク）
- id  
- fromNodeId  
- toNodeId  
- weight（0.1〜1.0）  

---

# 8. API（概要）

## 8.1 基本方針
- REST API  
- JSON 形式  
- 認証は Token または JWT（後で決定）

## 8.2 必要なエンドポイント（例）
- /projects  
- /projects/{id}/rounds  
- /rounds/{id}/steps  
- /steps/{id}/nodes  
- /nodes/{id}/links  

※ 詳細は API 仕様書で定義

---

# 9. セキュリティ
- HTTPS  
- CSRF 対策（Django 標準）  
- JWT or Token 認証  
- CORS 設定（フロントと分離するため）

---

# 10. 今後の拡張余地
- PWA によるオフライン対応  
- ノードツリーの可視化（Graph 表示）  
- AI によるキーワード補完（将来）  
- モバイルアプリ化（React Native / Flutter）  
- GraphDB（Neo4j）連携

---

# 11. 備考
本書は「技術スタック定義書」であり、  
詳細な画面仕様・API仕様・データ仕様は別途作成する。